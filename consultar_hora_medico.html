<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/consultar_hora_medico.css">
    <title>Document</title>
</head>

<body>
    <table id="tabla-consultas">
        <thead>
            <tr>
                <th>ID</th>
                <th>Dueño</th>
                <th>Mascota</th>
                <th>Tipo Mascota</th>
                <th>Fecha de Consulta</th>
                <th>Motivo</th>
                <th>Contacto</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-app.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDV3sJ563y6e1N567noDSBLf0unlicpYT4",
            authDomain: "huellas-del-corazon-6fbf9.firebaseapp.com",
            databaseURL: "https://huellas-del-corazon-6fbf9-default-rtdb.firebaseio.com",
            projectId: "huellas-del-corazon-6fbf9",
            storageBucket: "huellas-del-corazon-6fbf9.appspot.com",
            messagingSenderId: "711559984417",
            appId: "1:711559984417:web:192bfb619768879237fa60"
        };

        const app = initializeApp(firebaseConfig);
        import { getDatabase, set, get, update, remove, ref, child } from "https://www.gstatic.com/firebasejs/9.21.0/firebase-database.js"

        const db = getDatabase();

        // Get the table body element
        var tablaConsultas = document.getElementById("tabla-consultas");
        var tablaBody = document.getElementById("tabla-body");

        function FindData() {
            const tablaConsultas = document.getElementById('tabla-consultas');
            const tablaBody = tablaConsultas.tBodies[0];
            const dbRef = ref(db, 'ficha paciente/');
            const insertedRows = new Set(); // Set para almacenar IDs de filas ya insertadas

            get(dbRef).then((snapshot) => {
                if (snapshot.exists()) {
                    const promises = []; // Array para almacenar las promesas de inserción de filas
                    snapshot.forEach((childSnapshot) => {
                        const childData = childSnapshot.val();
                        if (!insertedRows.has(childData.ID)) {
                            const row = tablaBody.insertRow();
                            row.insertCell(0).textContent = childData.ID;
                            row.insertCell(1).textContent = childData.Dueño;
                            row.insertCell(2).textContent = childData.Mascota;
                            row.insertCell(3).textContent = childData.Tipo_Animal;
                            row.insertCell(4).textContent = childData.Fecha_consulta;
                            row.insertCell(5).textContent = childData.Motivo_consulta;
                            row.insertCell(6).textContent = childData.Contacto;
                        }
                    });
                }
            })
        }

        function delData(){
            remove(ref(db, "ficha paciente/" + owner.value))
            .then(()=>{
                alert(lasjfiowqjeiofj)
            })
        }

        FindData()
    </script>
    <!-- Agrega esto en el head de tu archivo HTML -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>

</body>

</html>